{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\shaii\\\\Desktop\\\\projects\\\\MrC\\\\src\\\\components\\\\ServiceProviderHome.js\";\nimport React, { Component, useEffect, some } from 'react';\nimport './ServiceProviderHome.css';\nimport { Redirect } from \"react-router-dom\";\nimport Header from './Header';\nimport Footer from './Footer';\nimport Error from './Error';\nimport Modal from 'react-bootstrap/Modal';\nimport { saveToLocalStorage } from '../storage';\nimport { loadWeb3, loadBlockchainData } from '../loadBlockchain';\n\nvar ServiceProviderHome = /*#__PURE__*/function (_Component) {\n  _inherits(ServiceProviderHome, _Component);\n\n  _createClass(ServiceProviderHome, [{\n    key: \"componentDidUpdate\",\n    value: function () {\n      var _componentDidUpdate = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.onpopstate = function (e) {\n                  useEffect(function () {\n                    var isMounted = true; // note mutable flag\n\n                    someAsyncOperation().then(function (data) {\n                      if (isMounted) setState(data); // add conditional check\n                    });\n                    return function () {\n                      isMounted = false;\n                    }; // use cleanup to toggle value, if unmounted\n                  }, []);\n\n                  _this2.props.history.push('/');\n                };\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function componentDidUpdate() {\n        return _componentDidUpdate.apply(this, arguments);\n      }\n\n      return componentDidUpdate;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var blockchain;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return loadWeb3();\n\n              case 2:\n                _context2.next = 4;\n                return loadBlockchainData();\n\n              case 4:\n                blockchain = _context2.sent;\n\n                if (blockchain !== undefined || blockchain !== null) {\n                  this.permissions = blockchain.permissions; // save smart contruct\n\n                  this.setState({\n                    loading: false,\n                    account: blockchain.account\n                  });\n                  saveToLocalStorage(this.state);\n                }\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }]);\n\n  function ServiceProviderHome(props) {\n    var _this;\n\n    _classCallCheck(this, ServiceProviderHome);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ServiceProviderHome).call(this, props));\n    _this.state = {\n      loading: true,\n      hasPermission: false,\n      loadingPatient: false,\n      hasError: false\n    };\n    _this.permissions = null;\n    _this.searchPatient = _this.searchPatient.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.checkPermission = _this.checkPermission.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.componentDidCatch = _this.componentDidMount.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ServiceProviderHome, [{\n    key: \"checkPermission\",\n    value: function () {\n      var _checkPermission = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(account) {\n        var check;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(account !== \"\" && account !== undefined)) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                this.setState({\n                  loading: true\n                });\n                _context3.next = 4;\n                return this.permissions.methods.havePermission(account).call({\n                  from: this.state.account\n                });\n\n              case 4:\n                check = _context3.sent;\n                this.setState({\n                  loadingPatient: false\n                });\n                saveToLocalStorage(this.state);\n\n                if (check) {\n                  this.setState({\n                    hasPermission: true\n                  });\n                  saveToLocalStorage(this.state);\n                } else {\n                  window.alert(\"Sorry! you don't have permission!!\");\n                  this.setState({\n                    patientAccount: ''\n                  });\n                  saveToLocalStorage(this.state);\n                }\n\n                _context3.next = 11;\n                break;\n\n              case 10:\n                window.alert(\"Sorry! something wrong happened\");\n\n              case 11:\n                this.setState({\n                  loading: false\n                }); // loading finish\n\n                saveToLocalStorage(this.state); // save state to storage\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function checkPermission(_x) {\n        return _checkPermission.apply(this, arguments);\n      }\n\n      return checkPermission;\n    }()\n  }, {\n    key: \"searchPatient\",\n    value: function () {\n      var _searchPatient = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var search;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                search = document.getElementById('searchInput'); // check if have permission\n\n                if (!(search !== undefined && search.value !== '')) {\n                  _context4.next = 9;\n                  break;\n                }\n\n                this.setState({\n                  loadingPatient: true\n                }); // show loading \n\n                this.setState({\n                  patientAccount: search.value\n                }); // show loading \n\n                saveToLocalStorage(this.state); // save state to storage\n\n                _context4.next = 7;\n                return this.checkPermission(search.value);\n\n              case 7:\n                _context4.next = 12;\n                break;\n\n              case 9:\n                this.setState({\n                  permission: false\n                });\n                saveToLocalStorage(this.state); // save state to storage\n\n                window.alert(\"Sorry! you entered incorrect account\");\n\n              case 12:\n                search.value = '';\n\n              case 13:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function searchPatient() {\n        return _searchPatient.apply(this, arguments);\n      }\n\n      return searchPatient;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Error, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }, this.state.loading ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 39\n        }\n      }, \"Loading.....\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n        account: this.state.account,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 22\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"h4\", {\n        style: {\n          paddingLeft: \"40px\",\n          color: \"#ff9900\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }, \"Hello \", this.state.account), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 22\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        style: {\n          textAlign: \"center\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 19\n        }\n      }, \"Searching patient by address\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"cover\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"divFrom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"search\",\n        id: \"searchInput\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 27\n        }\n      }), /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fa fa-search\",\n        onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n          return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  _context5.next = 2;\n                  return _this3.searchPatient();\n\n                case 2:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, _callee5);\n        })),\n        onTouchEnd: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n          return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  _context6.next = 2;\n                  return _this3.searchPatient();\n\n                case 2:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, _callee6);\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 31\n        }\n      }))), /*#__PURE__*/React.createElement(Modal, {\n        show: this.state.loadingPatient,\n        onHide: function onHide() {\n          return null;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Header, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 23\n        }\n      }, \"Loading..\")), /*#__PURE__*/React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 35\n        }\n      }, \"Please wait...\"))), this.state.hasPermission ? /*#__PURE__*/React.createElement(Redirect, {\n        push: true,\n        to: {\n          pathname: \"/ShowPatientMrc\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 19\n        }\n      }) : null), /*#__PURE__*/React.createElement(Footer, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }))));\n    }\n  }]);\n\n  return ServiceProviderHome;\n}(Component);\n\nexport default ServiceProviderHome;","map":{"version":3,"sources":["C:/Users/shaii/Desktop/projects/MrC/src/components/ServiceProviderHome.js"],"names":["React","Component","useEffect","some","Redirect","Header","Footer","Error","Modal","saveToLocalStorage","loadWeb3","loadBlockchainData","ServiceProviderHome","window","onpopstate","e","isMounted","someAsyncOperation","then","data","setState","props","history","push","blockchain","undefined","permissions","loading","account","state","hasPermission","loadingPatient","hasError","searchPatient","bind","checkPermission","componentDidCatch","componentDidMount","methods","havePermission","call","from","check","alert","patientAccount","search","document","getElementById","value","permission","paddingLeft","color","textAlign","pathname"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,SAA3B,EAAsCC,IAAtC,QAAiD,OAAjD;AACA,OAAO,2BAAP;AACA,SAASC,QAAT,QAAwB,kBAAxB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,uBAAlB;AACA,SAAQC,kBAAR,QAAiC,YAAjC;AACA,SAAQC,QAAR,EAAkBC,kBAAlB,QAA2C,mBAA3C;;IAEMC,mB;;;;;;;;;;;;;AAGFC,gBAAAA,MAAM,CAACC,UAAP,GAAqB,UAACC,CAAD,EAAO;AAC1Bb,kBAAAA,SAAS,CAAC,YAAM;AACd,wBAAIc,SAAS,GAAG,IAAhB,CADc,CACsB;;AACpCC,oBAAAA,kBAAkB,GAAGC,IAArB,CAA0B,UAAAC,IAAI,EAAI;AAChC,0BAAIH,SAAJ,EAAeI,QAAQ,CAACD,IAAD,CAAR,CADiB,CACE;AACnC,qBAFD;AAGA,2BAAO,YAAM;AAAEH,sBAAAA,SAAS,GAAG,KAAZ;AAAmB,qBAAlC,CALc,CAKsB;AACrC,mBANQ,EAMN,EANM,CAAT;;AAOA,kBAAA,MAAI,CAACK,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AAED,iBAVD;;;;;;;;;;;;;;;;;;;;;;;;;;uBAeSb,QAAQ,E;;;;uBACWC,kBAAkB,E;;;AAArCa,gBAAAA,U;;AACN,oBAAGA,UAAU,KAAKC,SAAf,IAA2BD,UAAU,KAAK,IAA7C,EAAkD;AAChD,uBAAKE,WAAL,GAAmBF,UAAU,CAACE,WAA9B,CADgD,CACN;;AAC1C,uBAAKN,QAAL,CAAc;AAACO,oBAAAA,OAAO,EAAC,KAAT;AAAeC,oBAAAA,OAAO,EAACJ,UAAU,CAACI;AAAlC,mBAAd;AACAnB,kBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB;AACJ;;;;;;;;;;;;;;;;;;AAEH,+BAAYR,KAAZ,EAAmB;AAAA;;AAAA;;AACf,6FAAMA,KAAN;AACA,UAAKQ,KAAL,GAAa;AACXF,MAAAA,OAAO,EAAC,IADG;AAEXG,MAAAA,aAAa,EAAC,KAFH;AAGXC,MAAAA,cAAc,EAAE,KAHL;AAIXC,MAAAA,QAAQ,EAAE;AAJC,KAAb;AAOA,UAAKN,WAAL,GAAmB,IAAnB;AACA,UAAKO,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,uDAArB;AACA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBD,IAArB,uDAAvB;AACA,UAAKE,iBAAL,GAAyB,MAAKC,iBAAL,CAAuBH,IAAvB,uDAAzB;AAZe;AAalB;;;;;wGACqBN,O;;;;;;sBACjBA,OAAO,KAAK,EAAZ,IAAkBA,OAAO,KAAKH,S;;;;;AAC/B,qBAAKL,QAAL,CAAc;AAAEO,kBAAAA,OAAO,EAAE;AAAX,iBAAd;;uBACqB,KAAKD,WAAL,CAAiBY,OAAjB,CAAyBC,cAAzB,CAAwCX,OAAxC,EAAiDY,IAAjD,CAAsD;AAACC,kBAAAA,IAAI,EAAC,KAAKZ,KAAL,CAAWD;AAAjB,iBAAtD,C;;;AAAfc,gBAAAA,K;AACN,qBAAKtB,QAAL,CAAc;AAACW,kBAAAA,cAAc,EAAC;AAAhB,iBAAd;AACAtB,gBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB;;AACA,oBAAGa,KAAH,EAAS;AACP,uBAAKtB,QAAL,CAAc;AAACU,oBAAAA,aAAa,EAAC;AAAf,mBAAd;AACArB,kBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB;AACD,iBAHD,MAII;AACFhB,kBAAAA,MAAM,CAAC8B,KAAP,CAAa,oCAAb;AACA,uBAAKvB,QAAL,CAAc;AAACwB,oBAAAA,cAAc,EAAC;AAAhB,mBAAd;AACAnC,kBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB;AACD;;;;;;AAGDhB,gBAAAA,MAAM,CAAC8B,KAAP,CAAa,iCAAb;;;AAEF,qBAAKvB,QAAL,CAAc;AAAEO,kBAAAA,OAAO,EAAE;AAAX,iBAAd,E,CAAkC;;AAClClB,gBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB,C,CAAgC;;;;;;;;;;;;;;;;;;;;;;;;;AAIxBgB,gBAAAA,M,GAASC,QAAQ,CAACC,cAAT,CAAwB,aAAxB,C,EACf;;sBACGF,MAAM,KAAKpB,SAAX,IAAwBoB,MAAM,CAACG,KAAP,KAAiB,E;;;;;AAC1C,qBAAK5B,QAAL,CAAc;AAACW,kBAAAA,cAAc,EAAC;AAAhB,iBAAd,E,CAAsC;;AACtC,qBAAKX,QAAL,CAAc;AAACwB,kBAAAA,cAAc,EAACC,MAAM,CAACG;AAAvB,iBAAd,E,CAA8C;;AAC9CvC,gBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB,C,CAAgC;;;uBAC1B,KAAKM,eAAL,CAAqBU,MAAM,CAACG,KAA5B,C;;;;;;;AAGN,qBAAK5B,QAAL,CAAc;AAAE6B,kBAAAA,UAAU,EAAE;AAAd,iBAAd;AACAxC,gBAAAA,kBAAkB,CAAC,KAAKoB,KAAN,CAAlB,C,CAAgC;;AAChChB,gBAAAA,MAAM,CAAC8B,KAAP,CAAa,sCAAb;;;AAEAE,gBAAAA,MAAM,CAACG,KAAP,GAAe,EAAf;;;;;;;;;;;;;;;;;;6BAGK;AAAA;;AACL,0BACI,uDACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC,KAAKnB,KAAL,CAAWF,OAAX,gBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAArB,gBACD,uDACA,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,KAAKE,KAAL,CAAWD,OAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,eAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,eAEK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFL,eAEU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFV,eAGA;AAAI,QAAA,KAAK,EAAE;AAACsB,UAAAA,WAAW,EAAC,MAAb;AAAoBC,UAAAA,KAAK,EAAC;AAA1B,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAwD,KAAKtB,KAAL,CAAWD,OAAnE,CAHA,eAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJA,eAIK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJL,eAKF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAI,QAAA,KAAK,EAAE;AAACwB,UAAAA,SAAS,EAAE;AAAZ,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCADJ,eAEI;AAAK,QAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,EAAE,EAAC,aAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAEQ;AAAG,QAAA,SAAS,EAAC,cAAb;AACA,QAAA,OAAO,wEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAmB,MAAI,CAACnB,aAAL,EAAnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF,EADP;AACmD,QAAA,UAAU,wEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAmB,MAAI,CAACA,aAAL,EAAnB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF,EAD7D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFR,CADJ,CAFJ,eASI,oBAAC,KAAD;AAAO,QAAA,IAAI,EAAE,KAAKJ,KAAL,CAAWE,cAAxB;AAAyC,QAAA,MAAM,EAAE;AAAA,iBAAM,IAAN;AAAA,SAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD,CAAO,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,CADF,eAII,oBAAC,KAAD,CAAO,IAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAZ,CAJJ,CATJ,EAeK,KAAKF,KAAL,CAAWC,aAAX,gBAED,oBAAC,QAAD;AAAU,QAAA,IAAI,MAAd;AAAe,QAAA,EAAE,EAAE;AACjBuB,UAAAA,QAAQ,EAAE;AADO,SAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFC,GAKC,IApBN,CALE,eA2BF,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA3BE,CAFA,CADJ,CADJ;AAqCD;;;;EAtH2BpD,S;;AAyHlC,eAAeW,mBAAf","sourcesContent":["import React, { Component, useEffect, some} from 'react'\nimport './ServiceProviderHome.css'\nimport { Redirect} from \"react-router-dom\";\nimport Header from './Header';\nimport Footer from './Footer'\nimport Error from './Error'\nimport Modal from 'react-bootstrap/Modal'\nimport {saveToLocalStorage} from '../storage'\nimport {loadWeb3, loadBlockchainData} from '../loadBlockchain'\n\nclass ServiceProviderHome extends Component{\n  \n  async componentDidUpdate(){\n    window.onpopstate  = (e) => {\n      useEffect(() => {\n        let isMounted = true;               // note mutable flag\n        someAsyncOperation().then(data => {\n          if (isMounted) setState(data);    // add conditional check\n        })\n        return () => { isMounted = false }; // use cleanup to toggle value, if unmounted\n      }, []);    \n      this.props.history.push('/')\n\n    }      \n}\n  async componentDidMount() {\n    \n       // loading blockchain\n       await loadWeb3()\n       const blockchain = await loadBlockchainData()\n       if(blockchain !== undefined ||blockchain !== null){\n         this.permissions = blockchain.permissions // save smart contruct\n         this.setState({loading:false,account:blockchain.account})\n         saveToLocalStorage(this.state)\n    }\n  }\n  constructor(props) {\n      super(props)\n      this.state = {\n        loading:true,\n        hasPermission:false,\n        loadingPatient: false,\n        hasError: false\n      }\n     \n      this.permissions = null\n      this.searchPatient = this.searchPatient.bind(this)\n      this.checkPermission = this.checkPermission.bind(this)\n      this.componentDidCatch = this.componentDidMount.bind(this)\n  }\n  async checkPermission(account){\n    if(account !== \"\" && account !== undefined){       \n      this.setState({ loading: true }) \n      const check  = await this.permissions.methods.havePermission(account).call({from:this.state.account})\n      this.setState({loadingPatient:false})\n      saveToLocalStorage(this.state) \n      if(check){\n        this.setState({hasPermission:true})\n        saveToLocalStorage(this.state)   \n      }\n      else{\n        window.alert(\"Sorry! you don't have permission!!\")\n        this.setState({patientAccount:''})\n        saveToLocalStorage(this.state)  \n      }\n    }\n    else{\n      window.alert(\"Sorry! something wrong happened\")\n    }\n    this.setState({ loading: false }) // loading finish\n    saveToLocalStorage(this.state)  // save state to storage\n}\n      \n    async searchPatient(){\n      const search = document.getElementById('searchInput')\n      // check if have permission\n      if(search !== undefined && search.value !== '' ){\n        this.setState({loadingPatient:true})  // show loading \n        this.setState({patientAccount:search.value})  // show loading \n        saveToLocalStorage(this.state)  // save state to storage\n        await this.checkPermission(search.value)\n      }\n      else{\n        this.setState({ permission: false })\n        saveToLocalStorage(this.state)  // save state to storage\n        window.alert(\"Sorry! you entered incorrect account\")\n      }\n        search.value = ''\n    }\n\n    render() {\n        return(\n            <>\n                <Error>\n                {this.state.loading ? <div>Loading.....</div> :\n                <>\n                <Header account={this.state.account}/>\n                <br/><br/><br/>\n                <h4 style={{paddingLeft:\"40px\",color:\"#ff9900\"}}>Hello {this.state.account}</h4>\n                <br/><br/>\n              <div>\n                  <h5 style={{textAlign: \"center\"}}>Searching patient by address</h5>\n                  <div className=\"cover\">\n                      <div className=\"divFrom\" >     \n                          <input type=\"search\" id=\"searchInput\" />\n                              <i className=\"fa fa-search\"  \n                              onClick={async () => {await this.searchPatient()}} onTouchEnd={async () => {await this.searchPatient()}} ></i>\n                      </div>\n                  </div>\n                  <Modal show={this.state.loadingPatient}  onHide={() => null}>\n                    <Modal.Header >\n                      <Modal.Title>Loading..</Modal.Title>\n                      </Modal.Header>\n                      <Modal.Body><span>Please wait...</span></Modal.Body>\n                  </Modal>\n                  {this.state.hasPermission \n                  ?  \n                  <Redirect push to={{\n                    pathname: \"/ShowPatientMrc\"\n                  }} />          \n                  : null}\n              </div>\n              <Footer/>\n              </>\n              }\n              </Error>\n              </>\n          );\n      }\n}\n\nexport default ServiceProviderHome;"]},"metadata":{},"sourceType":"module"}